<% presenter = Users::Sessions::NewPresenter.new(self) %>
<% content_for(:head) do %>
  <title><%= presenter.page_title %></title>
<% end %>
<div class="h-full py-10 bg-gray-50 md:py-24">
  <div class="container max-w-md p-6 mx-auto bg-white rounded-lg shadow sm:py-8">
    <div class="text-lg font-semibold sm:text-xl">
      <%= t(".heading", school_name: presenter.school_name) %>
    </div>
    <%= form_with(url: user_session_path, method: :post, local: true) do |f| %>
      <div class="mt-6">
        <label
          class="inline-block text-sm font-semibold tracking-wide text-gray-900" for="email">
          <%= t(".email_address") %>
        </label>
        <%= f.email_field :email, maxlength: 256, placeholder: 'john@example.com', required: true, class: 'appearance-none h-10 mt-1 block w-full text-gray-800 border border-gray-300 rounded py-2 px-4 text-sm focus:outline-none focus:bg-white focus:border-primary-400', tabindex: 1, required: true %>
      </div>
      <div class="mt-4">
        <div class="flex justify-between">
          <label
            class="inline-block text-sm font-semibold tracking-wide text-gray-900"
            for="password">
            <%= t(".password") %>
          </label>
          <a
            href="<%= request_password_reset_path %>"
            class="inline text-xs font-medium text-center cursor-pointer text-primary-400 hover:text-primary-600 whitespace-nowrap hover:underline focus:underline"
            tabindex=6>
            <%= t(".password_new") %>
          </a>
        </div>
        <%= f.password_field :password, placeholder: t(".type_password"), class: 'appearance-none h-10 mt-1 block w-full text-gray-800 border border-gray-300 rounded py-2 px-4 text-sm focus:outline-none focus:bg-white focus:border-primary-400', tabindex: 2, required: true %>
      </div>
      <div class="mt-3">
        <%= f.check_box :shared_device, required: false, tabindex: 3, class: "hidden checkbox-input" %>
        <label class="checkbox-label" for="shared_device">
          <span>
            <svg width="12px" height="10px" viewbox="0 0 12 10">
              <polyline points="1.5 6 4.5 9 10.5 1"></polyline>
            </svg>
          </span>
          <span class="text-xs"><%= t(".shared_device") %></span>
        </label>
        <span data-re-component="HelpIcon" data-re-json='<%= {children: t(".shared_device_help"), className: 'ms-1 text-xs', responsiveAlignment: 'rrc'}.to_json %>'></span>
      </div>
      <% if @show_checkbox_recaptcha %>
        <div class="mt-4">
          <%=
            recaptcha_tags(
              site_key: ENV['RECAPTCHA_V2_SITE_KEY'],
              nonce: content_security_policy_nonce,
            )
          %>
        </div>
      <% else %>
        <%=
          recaptcha_v3(
            action: 'user_password_login',
            site_key: ENV['RECAPTCHA_V3_SITE_KEY'],
            nonce: content_security_policy_nonce,
          )
        %>
      <% end %>
      <div class="mt-4">
        <%= f.submit t(".submit_email_and_password"), name: 'password_sign_in', data: { disable: true }, class: "btn btn-primary btn-large text-center w-full font-normal", tabindex: 5 %>
      </div>
      <div class="mt-8 text-center">
        <a href="/users/sign_in" class="text-xs font-medium underline cursor-pointer text-primary-500" tabindex=6>
          <% if presenter.providers.present? && presenter.oauth_host.present? %>
            <%= t(".sign_in_with_email_or_oauth") %>
          <% else %>
            <%= t(".sign_in_with_email") %>
          <% end %>
        </a>
      </div>
    <% end %>
  </div>
</div>
