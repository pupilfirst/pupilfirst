<% presenter = Users::Sessions::NewPresenter.new(self) %>
<% content_for(:head) do %>
  <title><%= presenter.page_title %></title>
<% end %>
<div class="h-full py-10 bg-gray-50 md:py-24">
  <div class="container max-w-md p-6 mx-auto bg-white rounded-lg shadow sm:py-8">
    <div class="text-lg font-semibold sm:text-xl">
      <%= t('.heading', school_name: presenter.school_name) %>
    </div>
    <% if presenter.oauth_host.present? %>
      <div class="flex flex-col items-center mt-6 space-y-4">
        <% presenter.providers.each do |provider| %>
          <a class="flex items-center justify-center w-full px-4 py-2 bg-white border border-gray-200 rounded-lg" href="<%= presenter.federated_login_url(provider) %>" rel="nofollow">
            <span class="text-lg ltr:text-right rtl:text-left">
              <i class="<%= presenter.icon_classes(provider) %>"></i>
            </span>
            <span class="font-medium ps-3">
              <%= presenter.button_text(provider) %>
            </span>
          </a>
        <% end %>
      </div>
    <% end %>
    <% if presenter.oauth_host.present? %>
      <div class="mt-8 relative z-10 text-xs font-semibold text-center text-gray-600 before:bg-gray-300 before:absolute before:top-1/2 before:left-1/2 before:transform before:-translate-x-1/2 before:w-full before:h-px before:content-[''] before:-z-[1]">
        <span class="px-2 text-gray-400 bg-white">
          <%= t('.sign_in_options_separator') %>
        </span>
      </div>
    <% end %>
    <%= form_with(url: user_session_path, method: :post, local: true) do |f| %>
      <div class="mt-6">
        <label
          class="inline-block text-sm font-semibold tracking-wide text-gray-900" for="email">
          <%= t(".email_address") %>
        </label>
        <%= f.email_field :email, maxlength: 256, placeholder: 'john@example.com', required: true, class: 'block w-full h-10 px-4 py-2 mt-1 text-sm text-gray-800 border border-gray-300 rounded appearance-none focus:outline-none focus:bg-white focus:border-primary-400', tabindex: 1 %>
      </div>
      <div class="mt-3">
        <%= f.check_box :shared_device, required: false, tabindex: 3, class: "hidden checkbox-input" %>
        <label class="checkbox-label" for="shared_device">
          <span>
            <svg width="12px" height="10px" viewbox="0 0 12 10">
              <polyline points="1.5 6 4.5 9 10.5 1"></polyline>
            </svg>
          </span>
          <span class="text-xs"><%= t(".shared_device") %></span>
        </label>
        <span data-re-component="HelpIcon" data-re-json='<%= {children: t(".shared_device_help"), className: 'ms-1 text-xs', responsiveAlignment: 'rrc'}.to_json %>'></span>
      </div>
      <%= render 'shared/recaptcha', v2: @show_checkbox_recaptcha, action: 'user_magic_link_request' %>
      <div class="mt-4">
        <%= f.submit t(".continue_with_email"), name: 'email_link', data: { disable: true }, class: "w-full font-normal text-center btn btn-primary btn-large", tabindex: 5 %>
      </div>
    <% end %>
    <div class="flex p-4 mt-3 bg-gray-100 border border-gray-100 rounded rtl:flex-row-reverse">
      <div class="flex items-center text-lg md:text-2xl">
        <i class="if i-key-light if-fw"></i>
      </div>
      <div class="text-xs ps-4">
        <%= t(".continue_with_email_help") %>
      </div>
    </div>
    <div class="mt-8 text-center">
      <a
          href="/users/sign_in_with_password"
          class="text-xs font-medium underline cursor-pointer text-primary-500"
        >
        <%= t('.sign_in_with_password') %>
      </a>
    </div>
  </div>
</div>
